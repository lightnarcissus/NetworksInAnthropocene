<!DOCTYPE html>
<head>
<link href="https://fonts.googleapis.com/css?family=Abril+Fatface|Quicksand|Roboto+Mono" rel="stylesheet"> 
<meta charset="utf-8">
<style type="text/css">
	html{ width:100%; height:100%; }
body{ width:100%; height:100%;
  font-family: 'Quicksand', sans-serif;
  font-weight: normal;
  color: #999;
  background-color: #eee;
}

form {
}

div {
  clear: both;
}


label {
  width: 200px;
  border-radius: 3px;
  border: 1px solid #D1D3D4
}

/* hide input */
input.radio:empty {
  margin-left: -999px;
}

/* style label */
input.radio:empty ~ label {
  position: relative;
  float: left;
  line-height: 2.5em;
  text-indent: 3.25em;
  margin-top: 2em;
  cursor: pointer;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

input.radio:empty ~ label:before {
  position: absolute;
  display: block;
  top: 0;
  bottom: 0;
  left: 0;
  content: '';
  width: 2.5em;
  background: #D1D3D4;
  border-radius: 3px 0 0 3px;
}

/* toggle hover */
input.radio:hover:not(:checked) ~ label:before {
  content:'\2714';
  text-indent: .9em;
  color: #C2C2C2;
}

input.radio:hover:not(:checked) ~ label {
  color: #888;
}

/* toggle on */
input.radio:checked ~ label:before {
  content:'\2714';
  text-indent: .9em;
  color: #9CE2AE;
  background-color: #4DCB6D;
}

input.radio:checked ~ label {
  color: #777;
}

/* radio focus */
input.radio:focus ~ label:before {
  box-shadow: 0 0 0 3px #999;
}


.radio-toolbar input[type="radio"] {
    display:none;
}

.radio-toolbar label {
    display:inline-block;
    background-color:#ddd;
    padding:4px 11px;
    font-family:Arial;
    font-size:16px;
}

.radio-toolbar input[type="radio"]:checked + label {
    background-color:#bbb;
}

div.title
{
  font-family: 'Abril Fatface', cursive;
    color: #000000;
    font-size: 40px;
}

div.btn {
  -webkit-border-radius: 28;
  -moz-border-radius: 28;
  border-radius: 28px;
  -webkit-box-shadow: 0px 1px 3px #666666;
  -moz-box-shadow: 0px 1px 3px #666666;
  box-shadow: 0px 1px 3px #666666;
  font-family: 'Roboto Mono', monospace;
  color: #ffffff;
  font-size: 20px;
  background: #000000;
  padding: 10px 20px 10px 20px;
  text-decoration: none;
}

div.btn:hover {
  background: #5eff00;
  text-decoration: none;
}
div.turn-count
{

  font-family: 'Roboto Mono', sans-serif;
  text-align: right;
  font-size: 60px;

</style>

  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script src="http://d3js.org/topojson.v1.min.js"></script>
  <script src="datamaps.world.hires.min.js"></script>

<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css">
</head>
<body>

<div class="title" id="title" align="center">
Networks in Anthropocene
</div>
  <!-- I recommend you host this file on your own, since this will change without warning -->
  <div class="top-info" id="top-info" style="position:relative;">
 
  <div class="btn" id="btn" align="center" style="position:relative;left:45%;width:10%;height:10%;" onclick="advanceTurn();">
   ADVANCE
   </div>
   <div class="turn-count" id="turn-count" style="position:absolute;top:0px;right:100px;width:10%;height:10%;">
   2016
   </div>

   <div id="all-options" style="position:absolute;top:-20px;left:150px;width:100%;height:100%;">
      <div style="position:absolute;top:-40px;left:-120px;">
<input type="radio" name="option1" id="option1" class="radio" checked/ onclick="EngageChoice(1)">
<label for="option1" id="opt1">First Option</label>
</div>
<div style="position:absolute;top:-40px;left:120px;">
<input type="radio" name="option1" id="option2" class="radio"/ onclick="EngageChoice(2)">
<label for="option2" id="opt2">Second Option</label>
</div>

<div style="position:absolute;top:10px;left:-120px;">
<input type="radio" name="option1" id="option3" class="radio"/ onclick="EngageChoice(3)">
<label for="option3" id="opt3">Third Option</label>
</div>

<div style="position:absolute;top:10px;left:120px;">
<input type="radio" name="option1" id="option4" class="radio"/ onclick="EngageChoice(4)">
<label for="option4" id="opt4">Fourth Option</label>
</div>
</div>  
</div>
<div id="main-container" style="position:absolute;width:100%;height:100%;">
 <div class="radio-toolbar" align="center" style="width:100%;height:auto;">  
    <input type="radio" id="radio1" name="radios" value="all" checked onclick="ShowNetwork();">
    <label for="radio1">Network</label>

    <input type="radio" id="radio2" name="radios"value="false" onclick="ShowEmissions();">
    <label for="radio2">Emissions</label>

    <input type="radio" id="radio3" name="radios" value="true" onclick="ShowConsumption();">
    <label for="radio3">Consumption</label>


</div>
  <div id="container1" style="position:relative;width:100%;height:100%;background:#0283f4;">
 
  </div>
 
  </div>
  
  <!-- Add as many pattern definitions (defs) as you'd like, make sure to include an ID -->
<svg xmlns="http://www.w3.org/2000/svg" version="1.1"
     xmlns:xlink="http://www.w3.org/1999/xlink">

       
    <!-- Horizontal Stripe pattern -->
    <defs>
        <pattern id="horizontal-stripe"
                 width="4" height="4"
                 patternUnits="userSpaceOnUse">
             <line x1="0" y1="2" x2="4" y2="2" stroke="blue" />
        </pattern>
    </defs>
       
       
      <!-- Vertical Stripe pattern -->   
    <defs>
        <pattern id="vertical-stripe"
                 width="4" height="4"
                 patternUnits="userSpaceOnUse">
             <line x1="2" y1="0" x2="2" y2="4" stroke="green" />
        </pattern>
    </defs>
    
     <!-- Diagonal Stripe pattern -->
    <defs>
        <pattern id="diagonal-stripe"
                 patternTransform="rotate(45)"
                 width="4" height="4"
                 patternUnits="userSpaceOnUse">
             <line x1="2" y1="0" x2="2" y2="4" stroke="#bada55" stroke-width="2" />
        </pattern>
    </defs>

      <!-- Circles pattern --> 
    <defs>
        <pattern id="circles"
                 width="4" height="4"
                 patternUnits="userSpaceOnUse">
                   <circle cx="2.5" cy="2.5" r="1.3" fill="green" />
      </pattern>
    </defs>
      
       <!-- Gradient pattern. Wouldn't really recommend this one. -->
     <linearGradient id="gradient">
        <stop offset="5%" stop-color="#F60" />
        <stop offset="95%" stop-color="#FF6" />
     </linearGradient>
       
     <!-- Triangles pattern -->  
     <pattern id="triangle"
       width="8" height="8"
       patternUnits="userSpaceOnUse">
         <polygon points="3,0 6,6 0,6" fill="purple"/>
      </pattern>
</svg>
     
     <script>
var carbondata =[['ABW',413.0355512536],
['AND',0],
['AFG',18168.8632027705],
['AGO',41657.1648460299],
['ALB',8898.6409114027],
['ARB',2577646.71520075],
['ARE',204888.718962496],
['ARG',380295.320368897],
['ARM',12319.3896093062],
['ASM',58.7655192902],
['ATG',552.7479143043],
['AUS',761686.273857649],
['AUT',90460.2102892241],
['AZE',56537.0817767984],
['BDI',6254.3710242253],
['BEL',133373.684007061],
['BEN',33533.0967333661],
['BFA',43910.4023930555],
['BGD',183300.562417687],
['BGR',67942.6956330647],
['BHR',32849.1057287728],
['BHS',4865.2067673892],
['BIH',27108.4002030228],
['BLR',109647.238750262],
['BLZ',1569.8585030674],
['BMU',632.8769920708],
['BOL',621726.72675282],
['BRA',2989417.95671697],
['BRB',1540.6157088427],
['BRN',14828.9670065495],
['BTN',3296.9637250255],
['BWA',82110.2767551773],
['CAF',515134.078641482],
['CAN',1027063.85487082],
['CEB',970733.622563327],
['CHE',54108.0975149024],
['CHI',0],
['CHL',120687.892409947],
['CHN',12454710.6051],
['CIV',33502.160237923],
['CMR',100922.136209962],
['COG',35743.9185202452],
['COL',173411.767914881],
['COM',564.2206617218],
['CPV',411.3250112516],
['CRI',12274.1340926836],
['CSS',96171.4120701711],
['CUB',52418.4556499535],
['CUW',0],
['CYM',448.8809383807],
['CYP',7431.1934534805],
['CZE',138957.424743003],
['DEU',951716.711065489],
['DJI',2766.3038150141],
['DMA',222.8355778137],
['DNK',53703.2239270284],
['DOM',33395.0844298818],
['DZA',176471.226769797],
['EAP',15406136.7399648],
['EAR',11287117.6643338],
['EAS',18853260.6214251],
['ECA',4762188.50916561],
['ECS',9398516.90335849],
['ECU',52746.5726940589],
['EGY',295499.745446082],
['EMU',3162081.89254619],
['ERI',4977.8880328195],
['ESP',348257.292233754],
['EST',23292.7792109021],
['ETH',185292.168103158],
['EUU',4704011.37378387],
['FCS',3252590.00877896],
['FIN',69072.9387223345],
['FJI',2258.1730567209],
['FRA',499146.634492193],
['FRO',47.53593355],
['FSM',41.43738678],
['GAB',34570.626576672],
['GBR',585779.783273432],
['GEO',14627.7492943065],
['GHA',107784.294435056],
['GIB',473.0057293164],
['GIN',101348.988273839],
['GMB',3529.2315295618],
['GNB',7604.7344973162],
['GNQ',6374.1710542502],
['GRC',100571.170745123],
['GRD',726.185419741],
['GRL',262.8436497732],
['GTM',31515.4501791152],
['GUM',85.8694584981],
['GUY',6140.6872515231],
['HIC',16821288.57835],
['HKG',58633.5167723061],
['HND',20467.1629868832],
['HPC',4654824.49737201],
['HRV',30421.0493635559],
['HTI',8835.4669083877],
['HUN',62988.3997990485],
['IBD',29293198.4008588],
['IBT',36442696.8458716],
['IDA',7149498.44501277],
['IDB',2071154.96061252],
['IDN',780550.764031458],
['IDX',5078343.48440025],
['IMN',0],
['IND',3002894.92752695],
['INX',0],
['IRL',62433.0138852174],
['IRN',551144.132445905],
['IRQ',155529.505046712],
['ISL',5514.8539922993],
['ISR',84044.4344111728],
['ITA',482634.000294537],
['JAM',15474.3204085017],
['JOR',27198.5945143973],
['JPN',1478858.88126732],
['KAZ',366502.19730054],
['KEN',54302.0956122537],
['KGZ',13794.7412448409],
['KHM',127399.586925028],
['KIR',58.0354562264],
['KNA',194.5675441429],
['KOR',668989.651446327],
['KSV',0],
['KWT',99467.1164008466],
['LAC',5520360.68684418],
['LAO',161718.737448862],
['LBN',20371.9733533155],
['LBR',2833.9427785052],
['LBY',82129.133946468],
['LCA',598.7659175521],
['LCN',5748110.70476488],
['LDC',4858364.43385817],
['LIC',3109154.71668593],
['LIE',0],
['LKA',30451.8263103441],
['LMC',9049801.06450186],
['LMY',35942144.6672189],
['LSO',3472.7075364245],
['LTE',21703710.3788043],
['LTU',29442.2123465731],
['LUX',12610.9976195246],
['LVA',13943.921724239],
['MAC',1673.8377976914],
['MAF',0],
['MAR',80436.7152145251],
['MCO',0],
['MDA',11350.629999647],
['MDG',117932.597060147],
['MDV',727.1317874063],
['MEA',2686950.43676124],
['MEX',663424.954361171],
['MHL',7.9564226778],
['MIC',32832989.950533],
['MKD',12992.2469938559],
['MLI',77437.931654233],
['MLT',1921.1277477424],
['MMR',528416.217662507],
['MNA',1549311.67895243],
['MNE',0],
['MNG',25944.2551989366],
['MNP',12.4885857402],
['MOZ',380308.292508061],
['MRT',13343.1626272099],
['MUS',3537.5487112428],
['MWI',21632.1320932947],
['MYS',279098.376755817],
['NAC',7371537.23960903],
['NAM',38049.2707847565],
['NCL',1660.2483619245],
['NER',11460.9158280465],
['NGA',301010.125866092],
['NIC',16323.0434302921],
['NLD',195873.763889571],
['NOR',63536.7320746753],
['NPL',40762.7152881677],
['NRU',4.5730200802],
['NZL',78130.9798816606],
['OED',16240618.062356],
['OMN',62201.5508044815],
['OSS',381550.816562249],
['PAK',369734.583692698],
['PAN',16248.7722905672],
['PER',74806.9567445781],
['PHL',167297.549725585],
['PLW',1.388755859],
['PNG',11087.4570564505],
['POL',414606.89232929],
['PRE',4241201.92147414],
['PRI',3293.2548797227],
['PRK',109894.964984758],
['PRT',72524.218510274],
['PRY',50843.9542041131],
['PSS',7928.9368967554],
['PST',15202840.4517225],
['PYF',799.8975766048],
['QAT',103155.120721373],
['ROU',121762.225104696],
['RUS',2803398.4879042],
['RWA',6689.9488974334],
['SAS',3649337.57395105],
['SAU',549111.583031927],
['SDN',491982.266532203],
['SEN',54185.3718787515],
['SGP',55910.2813044732],
['SLB',4591.4645270526],
['SLE',11810.8870188195],
['SLV',12577.7897375628],
['SMR',0],
['SOM',21916.3232231908],
['SRB',0],
['SSA',5054809.47834087],
['SSD',0],
['SSF',5055719.76569916],
['SST',485651.165529176],
['STP',195.4869612724],
['SUR',2657.8776235695],
['SVK',46301.2739711681],
['SVN',21074.7483377861],
['SWE',65767.7870645559],
['SWZ',3478.034532137],
['SXM',0],
['SYC',910.287358285],
['SYR',77118.711861813],
['TCA',19.1849644978],
['TCD',109796.019972251],
['TEA',15296187.5824808],
['TEC',5207216.45085845],
['TGO',22931.8554918877],
['THA',440411.679002401],
['TJK',15364.5752926943],
['TKM',92178.0749079615],
['TLA',5684923.79392966],
['TMN',1549311.67895243],
['TLS',959.3474036146],
['TON',158.3607976529],
['TSA',3649337.57395105],
['TSS',5055719.76569916],
['TTO',61308.5253484805],
['TUN',39721.0088471343],
['TUR',445640.078387113],
['TUV',5.239916769],
['TZA',235353.116917654],
['UGA',80725.0849205519],
['UKR',404900.30485731],
['UMC',23783188.8860311],
['URY',34237.8295185601],
['USA',6343840.50774614],
['UZB',177223.750994586],
['VCT',319.2180852433],
['VEN',281921.368594355],
['VGB',126.7835994434],
['VIR',61.4927757344],
['VNM',310664.069273385],
['VUT',446.2205969357],
['PSE',0],
['WLD',52763433.245569],
['WSM',356.0869600008],
['YEM',40924.6276912645],
['ZAF',450615.780893113],
['COD',802271.302846335],
['ZMB',320254.218335756],
['ZWE',72057.8033221346]];


var netdata= [['ABW',88.661226932496],
['AND',96.91],
['AFG',8.26],
['AGO',12.4],
['ALB',63.252932696931],
['ARB',39.5261540659397],
['ARE',91.2434057753709],
['ARG',69.40092102179],
['ARM',58.2493322231746],
['ASM',0],
['ATG',65.2],
['AUS',84.560519347399],
['AUT',83.9263],
['AZE',77],
['BDI',4.86622446359511],
['BEL',85.0529],
['BEN',6.787702956098],
['BFA',11.387646166247],
['BGD',14.4],
['BGR',56.6563],
['BHR',93.4783011354165],
['BHS',78],
['BIH',65.065502803344],
['BLR',62.230360906803],
['BLZ',41.589999999835],
['BMU',98.3236096537251],
['BOL',45.1],
['BRA',59.079477910505],
['BRB',76.11],
['BRN',71.2],
['BTN',39.8],
['BWA',27.5],
['CAF',4.563264351542],
['CAN',88.47],
['CEB',68.1565862177866],
['CHE',87.97],
['CHI',0],
['CHL',64.289],
['CHN',50.3],
['CIV',21],
['CMR',20.6801476606263],
['COG',7.61597466209],
['COL',55.9049725142924],
['COM',7.459161385649],
['CPV',43.019626357101],
['CRI',59.7629501371681],
['CSS',51.9169995201878],
['CUB',31.107970210145],
['CUW',0],
['CYM',77],
['CYP',71.7159],
['CZE',81.2986],
['DEU',87.5898],
['DJI',11.9224314345],
['DMA',67.6],
['DNK',96.3305],
['DOM',51.9302327383135],
['DZA',38.2],
['EAP',44.9820489707828],
['EAR',29.7923425468531],
['EAS',49.8247157803774],
['ECA',59.9320644594073],
['ECS',71.7441292126694],
['ECU',48.9404337892669],
['EGY',35.9],
['EMU',80.280283969454],
['ERI',1.083733115675],
['ESP',78.6896],
['EST',88.4066],
['ETH',11.6],
['EUU',79.6258146075023],
['FCS',14.98630874699],
['FIN',92.6513],
['FJI',46.32872894627],
['FRA',84.6945],
['FRO',94.2],
['FSM',31.501081275309],
['GAB',23.5],
['GBR',92.0003],
['GEO',45.1583744140752],
['GHA',23.478128435343],
['GIB',0],
['GIN',4.7],
['GMB',17.119820502123],
['GNB',3.540706917021],
['GNQ',21.319999985207],
['GRC',66.835],
['GRD',53.81],
['GRL',67.600443481006],
['GTM',27.100000000275],
['GUM',73.139999947043],
['GUY',38.2],
['HIC',81.0147435830839],
['HKG',84.9483529634062],
['HND',20.356867428881],
['HPC',12.1335183726839],
['HRV',69.8031],
['HTI',12.197766377036],
['HUN',72.8347],
['IBD',42.5005997446169],
['IBT',37.1141533061658],
['IDA',22.1328336912874],
['IDB',35.0408617964624],
['IDN',21.9760677113476],
['IDX',14.8570226267095],
['IMN',0],
['IND',26],
['INX',0],
['IRL',80.1224],
['IRN',44.082875016875],
['IRQ',17.22],
['ISL',98.2],
['ISR',78.88517910353],
['ITA',65.5716],
['JAM',43.1758971872],
['JOR',53.4],
['JPN',93.329411063737],
['KAZ',72.8660129673921],
['KEN',45.6228006060586],
['KGZ',30.247042775311],
['KHM',19],
['KIR',12.99748389414],
['KNA',75.7],
['KOR',89.8962557995106],
['KSV',0],
['KWT',82.0791147627883],
['LAC',53.8839339917845],
['LAO',18.2],
['LBN',74],
['LBR',5.903867602799],
['LBY',19.016079781565],
['LCA',52.35],
['LCN',54.4583843034657],
['LDC',12.628601218278],
['LIC',9.46034205257496],
['LIE',96.6411950959488],
['LKA',29.988737549341],
['LMC',28.6320615312121],
['LMY',36.7986475240125],
['LSO',16.071707703394],
['LTE',54.0592557700003],
['LTU',71.378],
['LUX',97.3341],
['LVA',79.2006],
['MAC',77.6001318608868],
['MAF',0],
['MAR',57.08],
['MCO',93.3633020180933],
['MDA',49.8369395415],
['MDG',4.173972190007],
['MDV',54.461955146942],
['MEA',43.707533366815],
['MEX',57.4310429923633],
['MHL',19.282441803511],
['MIC',39.7963632949121],
['MKD',70.3802],
['MLI',10.33692498389],
['MLT',76.184],
['MMR',21.8],
['MNA',38.2062538479483],
['MNE',64.564993139872],
['MNG',21.4360311065255],
['MNP',0],
['MOZ',9],
['MRT',15.199126690825],
['MUS',50.1393184766711],
['MWI',9.2981483471244],
['MYS',71.0640678111957],
['NAC',75.9372515632806],
['NAM',22.3070147912325],
['NCL',74.00175279141],
['NER',2.220165349673],
['NGA',47.442550294429],
['NIC',19.704291498993],
['NLD',93.0965],
['NOR',96.8103],
['NPL',17.58161800656],
['NRU',0],
['NZL',88.22288881795],
['OED',77.243487456501],
['OMN',74.174165970433],
['OSS',40.3955638254411],
['PAK',18],
['PAN',51.2054249948687],
['PER',40.9],
['PHL',40.7],
['PLW',0],
['PNG',7.9],
['POL',67.997],
['PRE',21.0710908041732],
['PRI',79.46876882531],
['PRK',0],
['PRT',68.6329],
['PRY',44.381596919184],
['PSS',29.7828414639424],
['PST',79.7749533624375],
['PYF',64.560209747212],
['QAT',92.8848264535481],
['ROU',55.7632],
['RUS',73.41],
['RWA',18],
['SAS',23.6279411151014],
['SAU',69.6162358014004],
['SDN',26.614928545846],
['SEN',21.690264133037],
['SGP',82.103],
['SLB',10.000464982561],
['SLE',2.5],
['SLV',26.915075328277],
['SMR',0],
['SOM',1.76],
['SRB',65.3170254003801],
['SSA',22.384664533935],
['SSD',17.9297872340426],
['SSF',22.3880597098621],
['SST',41.9345509745761],
['STP',25.822248798856],
['SUR',42.763827782511],
['SVK',85.019514056785],
['SVN',73.0987],
['SWE',90.6102],
['SWZ',30.382700656117],
['SXM',0],
['SYC',58.118697567706],
['SYR',29.979797235769],
['TCA',0],
['TCD',2.70000000055],
['TEA',44.9820489707828],
['TEC',60.7187464806964],
['TGO',7.12],
['THA',39.3161267365004],
['TJK',18.980000000495],
['TKM',14.996774820447],
['TLA',54.7037176765572],
['TMN',37.9589815831978],
['TLS',13.4],
['TON',44.999518833326],
['TSA',23.6279411151014],
['TSS',22.3880597098621],
['TTO',69.198470608693],
['TUN',48.519835991689],
['TUR',53.7449791423583],
['TUV',42.7],
['TWN', 77],
['TZA',5.355144064127],
['UGA',19.221099634407],
['UKR',49.26],
['UMC',52.1378691585815],
['URY',64.6],
['USA',74.55],
['UZB',42.8],
['VCT',51.77],
['VEN',61.869248094278],
['VGB',0],
['VIR',54.839137296],
['VNM',52.720000000055],
['VUT',22.351404582536],
['PSE',57.42419241388],
['WLD',43.9983147914322],
['WSM',25.407009766593],
['YEM',25.09951439988],
['ZAF',51.919115722747],
['COD',3.799999507273],
['ZMB',21],
['ZWE',16.36],
];

var carbon_dataset = {};
var net_dataset={};
selectionString="";

var currentSelection=0; //0 for none, 1 for network, 2 for emissions and 3 for consumption

var onlyValues = carbondata.map(function(obj){ return obj[1]; });
    var minValue = Math.min.apply(null, onlyValues),
            maxValue = Math.max.apply(null, onlyValues);
    // create color palette function
    // color can be whatever you wish
    var paletteScale = d3.scale.linear()
            .domain([1,12454711])
            .range(["#EFEFFF","#02386F"]); // blue color
    // fill dataset in appropriate format
    carbondata.forEach(function(item){ //
        // item example value ["USA", 70]
        var iso = item[0],
                value = item[1];
        carbon_dataset[iso] = { numberOfThings: value, fillColor: paletteScale(value) };
    });

    var someVals = netdata.map(function(obj){ return obj[1]; });
    var minValue = Math.min.apply(null, someVals),
            maxValue = Math.max.apply(null, someVals);
    // create color palette function
    // color can be whatever you wish
    var paletteScale = d3.scale.linear()
            .domain([2,97])
            .range(["#EFEFFF","#02386F"]); // blue color
    // fill dataset in appropriate format
    netdata.forEach(function(item){ //
        // item example value ["USA", 70]
        var iso = item[0],
                value = item[1];
        net_dataset[iso] = { numberOfThings: value, fillColor: paletteScale(value) };
    });

    
      var election = new Datamap({
        scope: 'world',
        element: document.getElementById('container1'),
        projection: 'mercator',
        
        fills: {
          defaultFill: '#f0af0a',
          horizontalStripe: 'url(#horizontal-stripe)',
          diagonalStripe: 'url(#diagonal-stripe)',
          verticalStripe: 'url(#vertical-stripe)',
          circles: 'url(#circles)',
          gradient: 'url(#gradient)',
          triangle: 'url(#triangle)'
        },
        
        data: {},
        done: function(datamap) {
          console.log(datamap.svg.selectAll('-datamaps-subunit'));
            datamap.svg.selectAll('.datamaps-subunit').on('click', function(geography) {
                console.log(geography.properties.iso);
                //election.updateChoropleth({USA: {fillKey: 'circles'},})
                changeOptions(geography.properties.iso,election);
            });
        },
        bubblesConfig: {
        borderWidth: 2,
        borderOpacity: 1,
        borderColor: '#FFFFFF',
        popupOnHover: true, // True to show the popup while hovering
        radius: null,
        popupTemplate: function(geography, data) {
                // don't show tooltip if country don't present in dataset
                if (!data) { return ; }
                // tooltip content
                return ['<div class="hoverinfo">',
                    '<strong>', geo.properties.name, '</strong>',
                    '<br>Count: <strong>', data.numberOfThings, '</strong>',
                    '</div>'].join('');
            },
        fillOpacity: 0.75,
        animate: true,
        highlightOnHover: true,
        highlightFillColor: '#FC8D59',
        highlightBorderColor: 'rgba(250, 15, 160, 0.2)',
        highlightBorderWidth: 2,
        highlightBorderOpacity: 1,
        highlightFillOpacity: 0.85,
        exitDelay: 100, // Milliseconds
        key: JSON.stringify
    },
    arcConfig: {
      strokeColor: 'red',
      strokeWidth: 1,
      arcSharpness: 1,
      animationSpeed: 600, // Milliseconds
      popupOnHover: true, // True to show the popup while hovering
      popupTemplate: function(geography, data) { // This function should just return a string
        // Case with latitude and longitude
        if ( ( data.origin && data.destination ) && data.origin.latitude && data.origin.longitude && data.destination.latitude && data.destination.longitude ) {
          return '<div class="hoverinfo"><strong>Cable</strong><br>Origin: ' + JSON.stringify(data.origin) + '<br>Destination: ' + JSON.stringify(data.destination) + '</div>';
        }
        // Case with only country name
        else if ( data.origin && data.destination ) {
          return '<div class="hoverinfo"><strong>Cable</strong><br>' + data.origin + ' -> ' + data.destination + '</div>';
        }
        // Missing information
        else {
          return '';
        }
      }
    },
    geographyConfig: {
            popupTemplate: function(geo, data) {
                return ['<div class="hoverinfo"><strong>',
                        selectionString + geo.properties.name,
                        ': ' + data.numberOfThings,
                        '</strong></div>'].join('');
            }
        }
      })
      var bombs = [{
        name: 'Joe 4',
        radius: 25,
        yield: 400,
        country: 'USSR',
        fillKey: 'RUS',
        significance: 'First fusion weapon test by the USSR (not "staged")',
        date: '1953-08-12',
        latitude: 50.07,
        longitude: 78.43
      },{
        name: 'RDS-37',
        radius: 40,
        yield: 1600,
        country: 'USSR',
        fillKey: 'RUS',
        significance: 'First "staged" thermonuclear weapon test by the USSR (deployable)',
        date: '1955-11-22',
        latitude: 50.07,
        longitude: 78.43

      },{
        name: 'Tsar Bomba',
        radius: 75,
        yield: 50000,
        country: 'USSR',
        fillKey: 'RUS',
        significance: 'Largest thermonuclear weapon ever testedâ€”scaled down from its initial 100 Mt design by 50%',
        date: '1961-10-31',
        latitude: 73.482,
        longitude: 54.5854
      }
    ];
    //draw bubbles for bombs

election.bubbles(bombs, {
    popupTemplate: function (geo, data) {
            return ['<div class="hoverinfo">' +  data.name,
            '<br/>Payload: ' +  data.yield + ' kilotons',
            '<br/>Country: ' +  data.country + '',
            '<br/>Date: ' +  data.date + '',
            '</div>'].join('');
    }
});


// Arcs coordinates can be specified explicitly with latitude/longtitude,
// or just the geographic center of the state/country.

election.arc([
  {
    origin: 'CAN',
    destination: 'IND'
  },
  {
    origin: 'CHN',
    destination: 'RUS'
  },

  //PIPELINE
  {
    origin:
    {
      latitude:25.132297,
      longitude:62.325026
    },
    destination:
    {
      latitude:1.490780,
      longitude:124.839644
    }
  },
  {
  origin:
  {
    latitude:1.490780,
    longitude:124.839644
  },
  destination:
  {
    latitude:13.419193,
    longitude:144.645958
  }
  },
//CABLE
 {
  origin:'SOM',
  destination:'TZA'
},
  {
    origin: 'BRA',
    destination: 'USA',
      options: {
        strokeWidth: 20,
        strokeColor: 'rgba(100, 10, 200, 0.4)',
        greatArc: true
      }
  },
  {
      origin: {
          latitude: 40.639722,
          longitude: -73.778889
      },
      destination: {
          latitude: 37.618889,
          longitude: -122.375
      }
  },
  {
      origin: {
          latitude: 30.194444,
          longitude: -97.67
      },
      destination: {
          latitude: 25.793333,
          longitude: -80.290556
      },
      options: {
        strokeWidth: 2,
        strokeColor: 'rgba(100, 10, 200, 0.4)',
        greatArc: true
      }
  },
  {
      origin: {
          latitude: 39.861667,
          longitude: -104.673056
      },
      destination: {
          latitude: 35.877778,
          longitude: -78.7875
      }
  }
],  {strokeWidth: 1, arcSharpness: 1.4});

console.log(election.options);
var turnCount=2016;
function changeOptions(countryName,map)
{
  console.log("it's " + countryName);
  console.log( document.getElementById('option1').children );
 document.getElementById('opt1').innerHTML = "Attempt to expand the bandwidth";
  document.getElementById('opt2').innerHTML = "Attempt to expand the bandwidth";

}

function advanceTurn()
{

  turnCount++;
  document.getElementById("turn-count").innerHTML=turnCount;
  updateDataValues();
}

function updateDataValues()
{

  console.log("nice");
  var usa=Math.floor((Math.random() * 100) + 1);
  var can=Math.floor((Math.random() * 100) + 1);
  net_dataset['USA'].numberOfThings=usa;

}

function ShowNetwork()
{
  currentSelection=1;
  selectionString='Network Connectivity in ';
election.updateChoropleth(null, {reset: true});
 election.updateChoropleth(net_dataset);
}

function ShowEmissions()
{
currentSelection=2;
selectionString='Greenhouse Emissions from ';
election.updateChoropleth(null, {reset: true});
election.updateChoropleth(carbon_dataset);
}

function ShowConsumption()
{

}

function EngageChoice(choice)
{
  if(choice==1)
  {
    console.log("1st");
  }
  else if(choice==2)
  {
    console.log("2nd");
  }
}
//resizing 
window.addEventListener('resize', function() {
        election.resize();
    });
/*
election.updateChoropleth({
   USA: '#0283f4',
   CAN: '#0283f4',
   CHN: '#0283f4'
});
  */ 
     </script>
</body>